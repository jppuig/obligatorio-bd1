ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY'; 

DROP TABLE MENSAJE; 
DROP TABLE CANAL; 
DROP TABLE SE_UNE; 
DROP TABLE SERVIDOR; 
DROP TABLE USUARIO; 

CREATE TABLE USUARIO ( 
    nombreUsuario VARCHAR2(50) CONSTRAINT PK_USUARIO PRIMARY KEY NOT NULL, 
    pais VARCHAR2(50) NOT NULL, 
    correoElectronico VARCHAR2(50) UNIQUE NOT NULL, 
    fechaRegistro DATE NOT NULL, 
    clave VARCHAR2(50) NOT NULL 
); 

CREATE TABLE SERVIDOR ( 
    nombre VARCHAR2(50) CONSTRAINT PK_SERVIDOR PRIMARY KEY NOT NULL, 
    descripcion VARCHAR2(100) NOT NULL, 
    nombreUsuarioCreador VARCHAR2(50) NOT NULL, 
    fechaCreacion DATE NOT NULL , 
    CONSTRAINT PK_SERVIDOR_USUARIO FOREIGN KEY (nombreUsuarioCreador) REFERENCES USUARIO (nombreUsuario) 
); 

CREATE TABLE SE_UNE ( 
    nombreUsuario VARCHAR2(50) NOT NULL, 
    nombreServidor VARCHAR2(50) NOT NULL, 
    CONSTRAINT PK_SE_UNE PRIMARY KEY (nombreUsuario, nombreServidor), 
    CONSTRAINT FK_SE_UNE_USUARIO FOREIGN KEY (nombreUsuario) REFERENCES USUARIO (nombreUsuario), 
    CONSTRAINT PK_SE_UNE_SERVIDOR FOREIGN KEY (nombreServidor) REFERENCES SERVIDOR (nombre) 
); 

CREATE TABLE CANAL ( 
    nombreCanal VARCHAR2(50) CONSTRAINT PK_CANAL PRIMARY KEY NOT NULL, 
    tipo VARCHAR2(50) NOT NULL CHECK (TIPO IN ('Texto', 'Voz')), 
    descripcion VARCHAR2(100) NOT NULL, 
    nombreServidor VARCHAR2(50) NOT NULL, 
    CONSTRAINT PK_CANAL_SERVIDOR FOREIGN KEY (nombreServidor) REFERENCES SERVIDOR (nombre) 
); 


CREATE TABLE MENSAJE (
    nombreCanal VARCHAR2(50) NOT NULL,
    numero NUMBER(10) NOT NULL,
    contenido VARCHAR2(255) NOT NULL, 
    nombreUsuario VARCHAR2(50) NOT NULL,
    fechaEnvio DATE NOT NULL,
    CONSTRAINT PK_MENSAJE PRIMARY KEY (nombreCanal, numero),
    CONSTRAINT PK_MENSAJE_CANAL FOREIGN KEY (nombreCanal) REFERENCES CANAL (nombreCanal),
    CONSTRAINT PK_MENSAJE_USUARIO FOREIGN KEY (nombreUsuario) REFERENCES USUARIO (nombreUsuario)
);

INSERT INTO usuario VALUES ('SHAKIRA', 'COLOMBIA', 'shakira@gmail.com', '08/05/2023', 'CLAVESHAKI');
INSERT INTO usuario VALUES ('CUADRADO', 'COLOMBIA', 'cuadrado@gmail.com', '08/05/2023', 'CLAVECUBO');
INSERT INTO usuario VALUES ('VINI JR', 'BRASIL', 'vinijr@gmail.com', '01/05/2023', 'CLAVEVINI');
INSERT INTO usuario VALUES ('PIQUE', 'ESPAÃ‘A', 'pique@gmail.com', '07/04/2021', 'CLAVEPIQUE');
INSERT INTO usuario VALUES ('MESSI', 'ARGENTINA', 'messi@gmail.com', '04/07/2022', 'CLAVEMESSI');
INSERT INTO usuario VALUES ('FORLAN', 'URUGUAY', 'forlan@gmail.com', '05/05/2023', 'CLAVEDIEGO');
INSERT INTO usuario VALUES ('SUAREZ', 'URUGUAY', 'suarez@gmail.com', '05/05/2023', 'CLAVELUIS');
INSERT INTO usuario VALUES ('CHICHARITO', 'MEXICO', 'chicha@gmail.com', '05/05/2023', 'CLAVECHICHARITO');
INSERT INTO usuario VALUES ('PEDRO GONZALEZ', 'MARRUECOS', 'pedrito@gmail.com', '01/06/2023', 'CLAVEPEDRO');
INSERT INTO usuario VALUES ('JUAN ORT', 'GUYANA FRANCESA', 'juancito@gmail.com', '01/06/2023', 'CLAVEJUAN');

INSERT INTO servidor VALUES ('SERVAPP', 'SERVIDOR SERVAPP', 'PIQUE', '08/05/2021');
INSERT INTO servidor VALUES ('SERVDOS', 'SERVIDOR SERVDOS', 'SHAKIRA', '09/05/2023');
INSERT INTO servidor VALUES ('SERVTRES', 'SERVIDOR SERVTRES', 'VINI JR', '10/05/2023');
INSERT INTO servidor VALUES ('SERVCUATRO', 'SERVIDOR SERVCUATRO', 'VINI JR', '11/05/2023');
INSERT INTO servidor VALUES ('SERVCINCO', 'SERVIDOR SERVCINCO', 'PIQUE', '12/05/2023');
INSERT INTO servidor VALUES ('SERVSEIS', 'SERVIDOR SERVSEIS', 'PIQUE', '07/06/2023');
INSERT INTO servidor VALUES ('SERVSIETE', 'SERVIDOR SERVSIETE', 'PEDRO GONZALEZ', '05/06/2023');
INSERT INTO servidor VALUES ('SERVOCHO', 'SERVIDOR SERVOCHO', 'PEDRO GONZALEZ', '06/06/2023');
INSERT INTO servidor VALUES ('SERVNUEVE', 'SERVIDOR SERVNUEVE', 'JUAN ORT', '07/06/2023');


INSERT INTO se_une VALUES ('PIQUE', 'SERVAPP');
INSERT INTO se_une VALUES ('PIQUE', 'SERVDOS');
INSERT INTO se_une VALUES ('PIQUE', 'SERVCINCO');
INSERT INTO se_une VALUES ('PIQUE', 'SERVSEIS');
INSERT INTO se_une VALUES ('SHAKIRA', 'SERVAPP');
INSERT INTO se_une VALUES ('SHAKIRA', 'SERVDOS');
INSERT INTO se_une VALUES ('VINI JR', 'SERVAPP');
INSERT INTO se_une VALUES ('VINI JR', 'SERVDOS');
INSERT INTO se_une VALUES ('VINI JR', 'SERVTRES');
INSERT INTO se_une VALUES ('VINI JR', 'SERVCUATRO');
INSERT INTO se_une VALUES ('MESSI', 'SERVAPP');
INSERT INTO se_une VALUES ('MESSI', 'SERVDOS');
INSERT INTO se_une VALUES ('MESSI', 'SERVTRES');
INSERT INTO se_une VALUES ('MESSI', 'SERVCINCO');
INSERT INTO se_une VALUES ('FORLAN', 'SERVTRES');
INSERT INTO se_une VALUES ('FORLAN', 'SERVCUATRO');
INSERT INTO se_une VALUES ('FORLAN', 'SERVCINCO');
INSERT INTO se_une VALUES ('SUAREZ', 'SERVTRES');
INSERT INTO se_une VALUES ('CHICHARITO', 'SERVCINCO');
INSERT INTO se_une VALUES ('CHICHARITO', 'SERVSEIS');
INSERT INTO se_une VALUES ('PEDRO GONZALEZ', 'SERVSIETE');
INSERT INTO se_une VALUES ('PEDRO GONZALEZ', 'SERVOCHO');
INSERT INTO se_une VALUES ('JUAN ORT', 'SERVNUEVE');


INSERT INTO canal VALUES ('SERVAPP VOZ', 'Voz', 'Este es el canal de voz de SERVAPP', 'SERVAPP');
INSERT INTO canal VALUES ('SERVAPP TEXTO', 'Texto', 'Este es el canal de texto de SERVAPP', 'SERVAPP');
INSERT INTO canal VALUES ('SERVDOS VOZ', 'Voz', 'Este es el canal general de voz de SERVDOS', 'SERVDOS');
INSERT INTO canal VALUES ('SERVDOS TEXTO', 'Texto', 'Este es el canal general de texto de SERVDOS', 'SERVDOS');
INSERT INTO canal VALUES ('SERVTRES TEXTO', 'Texto', 'Este es el canal general de texto de SERVTRES', 'SERVTRES');
INSERT INTO canal VALUES ('SERVCUATRO VOZ', 'Voz', 'Este es el canal general de voz de SERVCUATRO', 'SERVCUATRO');
INSERT INTO canal VALUES ('SERVCINCO VOZ', 'Voz', 'Este es el canal general de voz de SERVCINCO', 'SERVCINCO');
INSERT INTO canal VALUES ('SERVCINCO TEXTO', 'Texto', 'Este es el canal general de texto de SERVCINCO', 'SERVCINCO');
INSERT INTO canal VALUES ('SERVSEIS TEXTO', 'Texto', 'Este es el canal general de texto de SERVSEIS', 'SERVSEIS');
INSERT INTO canal VALUES ('SERVSEIS VOZ', 'Voz', 'Este es el canal general de voz de SERVSEIS', 'SERVSEIS');
INSERT INTO canal VALUES ('SERVSIETE VOZ', 'Voz', 'Este es el canal general de voz de SERVSIETE', 'SERVSIETE');
INSERT INTO canal VALUES ('SERVSIETE TEXTO', 'Texto', 'Este es el canal general de TEXTO de SERVSIETE', 'SERVSIETE');
INSERT INTO canal VALUES ('SERVOCHO VOZ', 'Voz', 'Este es el canal general de voz de SERVOCHO', 'SERVOCHO');
INSERT INTO canal VALUES ('SERVNUEVE VOZ', 'Voz', 'Este es el canal general de voz de SERVNUEVE', 'SERVNUEVE');
INSERT INTO canal VALUES ('SERVNUEVE TEXTO', 'Texto', 'Este es el canal general de TEXTO de SERVNUEVE', 'SERVNUEVE');


INSERT INTO mensaje VALUES ('SERVAPP VOZ', 25, 'HOLA', 'SHAKIRA', '10/05/2023');
INSERT INTO mensaje VALUES ('SERVAPP TEXTO', 24, 'SOY MESSI', 'MESSI', '10/05/2023');
INSERT INTO mensaje VALUES ('SERVAPP VOZ', 23, 'HOLA', 'PIQUE', '25/05/2023');
INSERT INTO mensaje VALUES ('SERVDOS TEXTO', 22, 'HOLA', 'SHAKIRA', '29/05/2023');
INSERT INTO mensaje VALUES ('SERVDOS VOZ', 21, 'CHAU', 'SHAKIRA', '30/05/2023');
INSERT INTO mensaje VALUES ('SERVDOS VOZ', 20, 'HOLA', 'PIQUE', '29/05/2023');
INSERT INTO mensaje VALUES ('SERVCINCO VOZ', 19, 'HOLA', 'FORLAN', '29/05/2023');
INSERT INTO mensaje VALUES ('SERVCINCO VOZ', 18, 'HOLA', 'CHICHARITO', '29/05/2023');
INSERT INTO mensaje VALUES ('SERVCINCO TEXTO', 17, 'HOLA', 'CHICHARITO', '29/05/2023');
INSERT INTO mensaje VALUES ('SERVSEIS TEXTO', 15, 'HOLA', 'CHICHARITO', '07/06/2023');
INSERT INTO mensaje VALUES ('SERVSEIS TEXTO', 16, 'HOLA', 'PIQUE', '07/06/2023');
INSERT INTO mensaje VALUES ('SERVSEIS TEXTO', 14, 'HOLA', 'CHICHARITO', '08/06/2023');
INSERT INTO mensaje VALUES ('SERVSEIS VOZ', 13, 'HOLA', 'PIQUE', '08/06/2023');
INSERT INTO mensaje VALUES ('SERVSEIS VOZ', 12, 'HOLA', 'PIQUE', '08/06/2023');
INSERT INTO mensaje VALUES ('SERVSIETE VOZ', 12, 'HOLA', 'PEDRO GONZALEZ', '08/06/2023');
INSERT INTO mensaje VALUES ('SERVNUEVE VOZ', 12, 'HOLA', 'JUAN ORT', '08/06/2023');
